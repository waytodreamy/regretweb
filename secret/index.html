<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Website</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #fff;
            background: #000;
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.08) 2px, transparent 2px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.08) 2px, transparent 2px);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            -webkit-mask-image: radial-gradient(circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%), black, transparent);
            mask-image: radial-gradient(circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%), black, transparent);
        }

        .container {
            max-width: 1400px;
            margin: 0;
            padding: 20px;
            position: relative;
            z-index: 1;
            perspective: 1200px;
        }

        main {
            background: rgba(17, 17, 17, 0.7);
            backdrop-filter: blur(10px);
            margin: 0;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
            transform: translateZ(0) rotateX(0deg) rotateY(0deg);
            will-change: transform;
        }

        main::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(88, 101, 242, 0.2), rgba(88, 101, 242, 0.05));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        main:hover::before {
            opacity: 1;
        }

        h2 {
            color: #fff;
            margin-bottom: 15px;
        }

        .discord-presence {
            background: linear-gradient(135deg, rgba(88, 101, 242, 0.1), rgba(88, 101, 242, 0.05));
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid rgba(88, 101, 242, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .avatar-container {
            position: relative;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #5865F2;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .avatar:hover {
            transform: scale(1.08) rotateZ(5deg);
        }

        .status-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 3px solid rgba(17, 17, 17, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .status-indicator.online { 
            background: #23a559;
            box-shadow: 0 0 10px rgba(35, 165, 89, 0.6);
        }
        
        .status-indicator.idle { 
            background: #f0b232;
            box-shadow: 0 0 10px rgba(240, 178, 50, 0.6);
        }
        
        .status-indicator.dnd { 
            background: #f23f43;
            box-shadow: 0 0 10px rgba(242, 63, 67, 0.6);
        }
        
        .status-indicator.offline { 
            background: #80848e;
        }

        .status-indicator.streaming { 
            background: #593695;
            box-shadow: 0 0 10px rgba(89, 54, 149, 0.6);
        }

        .status-indicator::after {
            content: '';
            width: 10px;
            height: 10px;
            background: rgba(17, 17, 17, 0.9);
            border-radius: 50%;
        }

        .status-indicator.dnd::after {
            width: 8px;
            height: 2px;
            border-radius: 1px;
        }

        .status-indicator.idle::after {
            width: 0;
            height: 0;
            background: transparent;
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-bottom: 5px solid rgba(17, 17, 17, 0.9);
            border-radius: 0;
            transform: translateY(-1px);
        }

        .status-indicator.offline::after {
            width: 8px;
            height: 8px;
            border: 2px solid rgba(17, 17, 17, 0.9);
            background: transparent;
        }

        .username {
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .badge {
            width: 24px;
            height: 24px;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            cursor: help;
            position: relative;
        }

        .badge:hover {
            transform: scale(1.2);
        }

        .badge-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            margin-bottom: 8px;
            z-index: 10;
        }

        .badge:hover .badge-tooltip {
            opacity: 1;
        }

        .status-text {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            margin-top: 5px;
            width: fit-content;
            transition: all 0.3s ease;
        }

        .status-text.online { background: rgba(35, 165, 89, 0.2); color: #23a559; }
        .status-text.idle { background: rgba(240, 178, 50, 0.2); color: #f0b232; }
        .status-text.dnd { background: rgba(242, 63, 67, 0.2); color: #f23f43; }
        .status-text.offline { background: rgba(128, 132, 142, 0.2); color: #80848e; }
        .status-text.streaming { background: rgba(89, 54, 149, 0.2); color: #593695; }

        .spotify-player {
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(30, 215, 96, 0.15), rgba(30, 215, 96, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(30, 215, 96, 0.3);
            transition: all 0.3s ease;
        }

        .spotify-player:hover {
            border-color: rgba(30, 215, 96, 0.5);
            box-shadow: 0 0 20px rgba(30, 215, 96, 0.1);
        }

        .spotify-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            color: #1ed760;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .spotify-content {
            display: flex;
            gap: 15px;
        }

        .spotify-album {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .spotify-album:hover {
            transform: scale(1.05) rotateZ(-2deg);
        }

        .spotify-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .spotify-song {
            font-weight: bold;
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 5px;
        }

        .spotify-artist {
            color: #b3b3b3;
            font-size: 0.9rem;
            margin-bottom: 3px;
        }

        .spotify-album-name {
            color: #b3b3b3;
            font-size: 0.85rem;
        }

        .spotify-progress {
            margin-top: 12px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background: #1ed760;
            border-radius: 2px;
            transition: width 0.5s linear;
        }

        .progress-time {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #b3b3b3;
        }

        .activity {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            border-left: 3px solid #5865F2;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .activity:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateX(8px);
            border-left-color: #7289da;
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .activity-icon {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .activity:hover .activity-icon {
            transform: scale(1.05);
        }

        .activity-name {
            font-weight: bold;
            color: #fff;
            font-size: 1.1rem;
        }

        .activity-details {
            color: #b9bbbe;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .activity-type {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
            color: #8e9297;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .activity-timestamps {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .loading {
            text-align: center;
            color: #b9bbbe;
        }

        p {
            margin-bottom: 15px;
        }

        button {
            background: #fff;
            color: #000;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        button:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        .streaming-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: linear-gradient(135deg, rgba(89, 54, 149, 0.3), rgba(89, 54, 149, 0.1));
            border: 1px solid #593695;
            border-radius: 12px;
            font-size: 0.85rem;
            color: #593695;
            font-weight: bold;
            margin-top: 8px;
        }

        .streaming-indicator::before {
            content: '‚ñ∂';
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .social-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
        }

        .social-button:hover {
            transform: scale(1.15) translateY(-5px) rotateZ(5deg);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.5);
        }

        .social-button.discord {
            background: #000000;
            border: 2px solid #5865F2;
        }

        .social-button.discord:hover {
            background: #5865F2;
            border-color: #5865F2;
            box-shadow: 0 0 20px rgba(88, 101, 242, 0.5);
        }

        .social-button.tiktok {
            background: #000000;
            border: 2px solid #ffffff;
        }

        .social-button.tiktok:hover {
            background: #ffffff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .social-button.tiktok:hover svg {
            fill: #000000;
        }

        .social-button.litecoin {
            background: #000000;
            border: 2px solid #345D9D;
        }

        .social-button.litecoin:hover {
            background: #345D9D;
            border-color: #345D9D;
            box-shadow: 0 0 20px rgba(52, 93, 157, 0.5);
        }

        .copy-tooltip {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #23a559;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .copy-tooltip.show {
            opacity: 1;
        }

        .social-button svg {
            width: 30px;
            height: 30px;
            fill: #ffffff;
            transition: all 0.3s ease;
        }

        .music-player {
            background: linear-gradient(135deg, rgba(88, 101, 242, 0.1), rgba(88, 101, 242, 0.05));
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid rgba(88, 101, 242, 0.2);
            transition: all 0.3s ease;
            position: relative;
        }

        .music-player::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(88, 101, 242, 0.2), rgba(88, 101, 242, 0.05));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .music-player:hover::before {
            opacity: 1;
        }

        .player-content {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .album-art-small {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);
        }

        .album-art-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .playing .album-art-small img {
            animation: subtleRotate 20s linear infinite;
        }

        @keyframes subtleRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .visualizer-small {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 2px;
            padding: 5px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .playing .visualizer-small {
            opacity: 1;
        }

        .visualizer-small .bar {
            width: 3px;
            background: linear-gradient(to top, #5865F2, #7289da);
            border-radius: 2px;
            animation: wave 0.8s ease-in-out infinite;
        }

        .visualizer-small .bar:nth-child(1) { animation-delay: 0s; }
        .visualizer-small .bar:nth-child(2) { animation-delay: 0.1s; }
        .visualizer-small .bar:nth-child(3) { animation-delay: 0.2s; }
        .visualizer-small .bar:nth-child(4) { animation-delay: 0.1s; }
        .visualizer-small .bar:nth-child(5) { animation-delay: 0s; }

        @keyframes wave {
            0%, 100% { height: 4px; }
            50% { height: 20px; }
        }

        .song-info-compact {
            flex: 1;
            min-width: 0;
        }

        .song-title-small {
            font-size: 0.95rem;
            font-weight: bold;
            color: #fff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .song-artist-small {
            font-size: 0.8rem;
            color: #b9bbbe;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .controls-compact {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-btn-small {
            background: rgba(255, 255, 255, 0.05);
            border: 1.5px solid rgba(88, 101, 242, 0.3);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            padding: 0;
        }

        .control-btn-small:hover {
            background: rgba(88, 101, 242, 0.2);
            border-color: #5865F2;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(88, 101, 242, 0.4);
        }

        .control-btn-small:active {
            transform: scale(0.95);
        }

        .play-btn-small {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, #5865F2, #7289da);
            border-color: #5865F2;
        }

        .play-btn-small:hover {
            background: linear-gradient(135deg, #7289da, #5865F2);
            transform: scale(1.15);
        }

        .control-btn-small svg {
            fill: #fff;
            width: 16px;
            height: 16px;
        }

        .play-btn-small svg {
            width: 20px;
            height: 20px;
        }

        .time-compact {
            font-size: 0.75rem;
            color: #b9bbbe;
            white-space: nowrap;
        }

        .progress-bar-compact {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: visible;
            cursor: pointer;
            transition: height 0.2s ease;
            position: relative;
        }

        .progress-bar-compact:hover {
            height: 6px;
        }

        .progress-fill-compact {
            height: 100%;
            background: linear-gradient(90deg, #5865F2, #7289da);
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
        }

        .progress-fill-compact::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translate(50%, -50%);
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 8px rgba(88, 101, 242, 0.8);
            transition: opacity 0.2s ease;
        }

        .progress-bar-compact:hover .progress-fill-compact::after {
            opacity: 1;
        }

        audio {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                perspective: none;
            }

            main {
                transform: none !important;
            }

            .social-buttons {
                gap: 10px;
            }

            .social-button {
                width: 50px;
                height: 50px;
            }

            .social-button:hover {
                transform: scale(1.1) translateY(-3px);
            }

            .social-button svg {
                width: 24px;
                height: 24px;
            }

            .player-content {
                flex-wrap: wrap;
            }

            .time-compact {
                width: 100%;
                text-align: center;
                margin-top: 5px;
            }
        }
    </style>
</head>
<body>
    <main class="container">
        <div class="discord-presence">
            <div id="presence-container" class="loading">
                Loading Discord presence...
            </div>
        </div>
        <div class="music-player" id="player">
            <div class="player-content">
                <div class="album-art-small">
                    <img src="https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=200&h=200&fit=crop" alt="Album Art" id="albumArt">
                    <div class="visualizer-small">
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                        <div class="bar"></div>
                    </div>
                </div>
                
                <div class="song-info-compact">
                    <div class="song-title-small" id="songTitle">Night Drive</div>
                    <div class="song-artist-small" id="songArtist">Synthwave Dreams</div>
                </div>

                <div class="controls-compact">
                    <button class="control-btn-small" id="prevBtn" title="Previous">
                        <svg viewBox="0 0 24 24">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                        </svg>
                    </button>
                    
                    <button class="control-btn-small play-btn-small" id="playBtn" title="Play/Pause">
                        <svg viewBox="0 0 24 24" id="playIcon">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    
                    <button class="control-btn-small" id="nextBtn" title="Next">
                        <svg viewBox="0 0 24 24">
                            <path d="M16 18h2V6h-2zm-11-7l8.5-6v12z"/>
                        </svg>
                    </button>
                </div>

                <div class="time-compact">
                    <span id="currentTime">0:00</span> / <span id="duration">3:45</span>
                </div>
            </div>

            <div class="progress-bar-compact" id="progressBar">
                <div class="progress-fill-compact" id="progressFill"></div>
            </div>
        </div>

        <audio id="audioPlayer" preload="metadata"></audio>

    </main>

    <script>
        const DISCORD_ID = '1423011606782021763';
        let spotifyUpdateInterval;
        let mouseX = 0;
        let mouseY = 0;
        let targetRotateX = 0;
        let targetRotateY = 0;
        let currentRotateX = 0;
        let currentRotateY = 0;
        let userBadges = [];

        // Music Player Variables
        const player = document.getElementById('player');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const songTitle = document.getElementById('songTitle');
        const songArtist = document.getElementById('songArtist');
        const albumArt = document.getElementById('albumArt');
        const audioPlayer = document.getElementById('audioPlayer');

        let currentSongIndex = 0;

        const playlist = [
            {
                title: 'Buzzin',
                artist: 'Lil Peep',
                url: 'https://regret.best/media/Buzzin.mp3',
                albumArt: 'https://regret.best/media/Buzzin.jpg'
            },
            {
                title: 'Mine Too',
                artist: 'King Von',
                url: 'https://regret.best/media/mineto.mp3',
                albumArt: 'https://i.scdn.co/image/ab67616d0000b273429d4b3d9261b9ccc24d7d36'
            }
        ];

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function togglePlay() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                player.classList.add('playing');
                playIcon.innerHTML = '<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>';
            } else {
                audioPlayer.pause();
                player.classList.remove('playing');
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function loadSong(index) {
            currentSongIndex = index;
            const song = playlist[index];
            
            songTitle.textContent = song.title;
            songArtist.textContent = song.artist;
            albumArt.src = song.albumArt;
            audioPlayer.src = song.url;
            
            audioPlayer.load();
        }

        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % playlist.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
        }

        audioPlayer.addEventListener('timeupdate', () => {
            const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressFill.style.width = `${percentage}%`;
            currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
        });

        audioPlayer.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(audioPlayer.duration);
        });

        audioPlayer.addEventListener('ended', () => {
            nextSong();
        });

        playBtn.addEventListener('click', togglePlay);
        nextBtn.addEventListener('click', nextSong);
        prevBtn.addEventListener('click', prevSong);

        progressBar.addEventListener('click', (e) => {
            const rect = progressBar.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const percentage = x / rect.width;
            audioPlayer.currentTime = audioPlayer.duration * percentage;
        });

        loadSong(0);

        function copyLitecoinAddress() {
            const address = 'YOUR_LITECOIN_ADDRESS';
            navigator.clipboard.writeText(address).then(() => {
                const tooltip = document.getElementById('copy-tooltip');
                tooltip.classList.add('show');
                setTimeout(() => {
                    tooltip.classList.remove('show');
                }, 2000);
            });
        }

        async function fetchDiscordPresence() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                const data = await response.json();
                
                if (data.success) {
                    displayPresence(data.data);
                } else {
                    document.getElementById('presence-container').innerHTML = '<p>Unable to load Discord presence. Please add your Discord ID.</p>';
                }
            } catch (error) {
                document.getElementById('presence-container').innerHTML = '<p>Error loading Discord presence.</p>';
            }
        }

        async function fetchBadges() {
            try {
                const response = await fetch(`https://dcdn.dstn.to/profile/${DISCORD_ID}`);
                const data = await response.json();
                
                if (data.badges) {
                    userBadges = data.badges;
                }
            } catch (error) {
                console.error('Error fetching badges:', error);
            }
        }

        function getBadgeInfo(flag) {
            const badges = {
                1: { name: 'Discord Staff', icon: 'https://cdn.discordapp.com/badge-icons/5e74e9b61934fc1f67c65515d1f7e60d.png' },
                2: { name: 'Partnered Server Owner', icon: 'https://cdn.discordapp.com/badge-icons/3f9748e53446a137a052f3454e2de41e.png' },
                4: { name: 'HypeSquad Events', icon: 'https://cdn.discordapp.com/badge-icons/bf01d1073931f921909045f3a39fd264.png' },
                8: { name: 'Bug Hunter Level 1', icon: 'https://cdn.discordapp.com/badge-icons/2717692c7dca7289b35297368a940dd0.png' },
                64: { name: 'House Bravery', icon: 'https://cdn.discordapp.com/badge-icons/8a88d63823d8a71cd5e390baa45efa02.png' },
                128: { name: 'House Brilliance', icon: 'https://cdn.discordapp.com/badge-icons/011940fd013da3f7fb926e4a1cd2e618.png' },
                256: { name: 'House Balance', icon: 'https://cdn.discordapp.com/badge-icons/3aa41de486fa12454c3761e8e223442e.png' },
                512: { name: 'Early Supporter', icon: 'https://cdn.discordapp.com/badge-icons/7060786766c9c840eb3019e725d2b358.png' },
                16384: { name: 'Bug Hunter Level 2', icon: 'https://cdn.discordapp.com/badge-icons/848f79194d4be5ff5f81505cbd0ce1e6.png' },
                131072: { name: 'Verified Bot Developer', icon: 'https://cdn.discordapp.com/badge-icons/6df5892e0f35b051f8b61eace34f4967.png' },
                262144: { name: 'Early Verified Bot Developer', icon: 'https://cdn.discordapp.com/badge-icons/6df5892e0f35b051f8b61eace34f4967.png' },
                4194304: { name: 'Active Developer', icon: 'https://cdn.discordapp.com/badge-icons/6bdc42827a38498929a4920da12695d9.png' }
            };
            return badges[flag];
        }

        function renderBadges(publicFlags) {
            const badgeFlags = [4194304, 262144, 131072, 16384, 512, 256, 128, 64, 8, 4, 2, 1];
            let badgesHTML = '';
            
            for (const flag of badgeFlags) {
                if (publicFlags & flag) {
                    const badge = getBadgeInfo(flag);
                    if (badge) {
                        badgesHTML += `
                            <img src="${badge.icon}" alt="${badge.name}" class="badge" title="${badge.name}">
                        `;
                    }
                }
            }

            if (userBadges && userBadges.length > 0) {
                for (const badge of userBadges) {
                    console.log('Processing badge:', badge); // Debug log
                    const iconUrl = 'https://www.regret.best/media/97279-discordnitro.png';
                    badgesHTML += `
                        <img src="${iconUrl}" alt="${badge.description || 'Badge'}" class="badge" title="${badge.description || 'Badge'}">
                    `;
                }
            }
            
            return badgesHTML ? `<div class="badges">${badgesHTML}</div>` : '';
        }

        function getActivityTypeIcon(type) {
            const icons = {
                0: 'üéÆ',
                1: 'üì°',
                2: 'üéµ',
                3: 'üì∫',
                5: 'üèÜ'
            };
            return icons[type] || 'üí¨';
        }

        function getActivityTypeName(type) {
            const names = {
                0: 'Playing',
                1: 'Streaming',
                2: 'Listening to',
                3: 'Watching',
                5: 'Competing in'
            };
            return names[type] || 'Activity';
        }

        function getStatusIcon(status) {
            const icons = {
                online: 'Online',
                idle: 'Idle',
                dnd: 'Do Not Disturb',
                offline: 'Offline'
            };
            return icons[status] || 'Offline';
        }

        function getActivityIcon(activity) {
            if (activity.name === 'Spotify' && activity.assets?.large_image) {
                return `https://i.scdn.co/image/${activity.assets.large_image.replace('spotify:', '')}`;
            }
            
            if (activity.assets?.large_image) {
                if (activity.assets.large_image.startsWith('mp:external')) {
                    const externalUrl = activity.assets.large_image.split('mp:external/')[1];
                    if (externalUrl) {
                        return `https://media.discordapp.net/external/${externalUrl}`;
                    }
                }
                if (activity.assets.large_image.startsWith('http')) {
                    return activity.assets.large_image;
                }
                if (activity.application_id) {
                    return `https://cdn.discordapp.com/app-assets/${activity.application_id}/${activity.assets.large_image}.png`;
                }
            }
            
            return null;
        }

        function displayPresence(userData) {
            const container = document.getElementById('presence-container');
            const status = userData.discord_status;
            const user = userData.discord_user;
            const activities = userData.activities;
            const spotify = userData.spotify;

            const isStreaming = activities?.some(a => a.type === 1);
            const displayStatus = isStreaming ? 'streaming' : status;

            const badgesHTML = renderBadges(user.public_flags || 0);

            let html = `
                <div class="user-info">
                    <div class="avatar-container">
                        <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=128" alt="Avatar" class="avatar">
                        <div class="status-indicator ${isStreaming ? 'streaming' : status}"></div>
                    </div>
                    <div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="username">${user.username}</div>
                            ${badgesHTML}
                        </div>
                    </div>
                </div>
            `;

            if (spotify) {
                const albumArt = spotify.album_art_url;
                html += `
                    <div class="spotify-player">
                        <div class="spotify-header">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
                            </svg>
                            Listening to Spotify
                        </div>
                        <div class="spotify-content">
                            ${albumArt ? `<img src="${albumArt}" alt="Album Art" class="spotify-album">` : ''}
                            <div class="spotify-info">
                                <div class="spotify-song">${spotify.song}</div>
                                <div class="spotify-artist">${spotify.artist}</div>
                                ${spotify.album ? `<div class="spotify-album-name">${spotify.album}</div>` : ''}
                            </div>
                        </div>
                        ${spotify.timestamps ? createSpotifyProgress(spotify.timestamps) : ''}
                    </div>
                `;

                if (spotifyUpdateInterval) clearInterval(spotifyUpdateInterval);
                spotifyUpdateInterval = setInterval(() => {
                    updateSpotifyProgress(spotify.timestamps);
                }, 1000);
            } else {
                if (spotifyUpdateInterval) {
                    clearInterval(spotifyUpdateInterval);
                    spotifyUpdateInterval = null;
                }
            }

            if (activities && activities.length > 0) {
                activities.forEach(activity => {
                    if (activity.type !== 4 && activity.name !== 'Spotify') {
                        const activityIcon = getActivityIcon(activity);
                        
                        html += `
                            <div class="activity">
                                <div class="activity-type">
                                    ${getActivityTypeIcon(activity.type)} ${getActivityTypeName(activity.type)}
                                </div>
                                <div class="activity-header">
                                    ${activityIcon ? `<img src="${activityIcon}" alt="${activity.name}" class="activity-icon" onerror="this.style.display='none'">` : ''}
                                    <div>
                                        <div class="activity-name">${activity.name}</div>
                                        ${activity.details ? `<div class="activity-details">${activity.details}</div>` : ''}
                                        ${activity.state ? `<div class="activity-details">${activity.state}</div>` : ''}
                                    </div>
                                </div>
                                ${activity.timestamps?.start ? `
                                    <div class="activity-timestamps">
                                        <div class="activity-details">‚è±Ô∏è ${formatElapsedTime(activity.timestamps.start)}</div>
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    }
                });
            }

            container.innerHTML = html;
        }

        function createSpotifyProgress(timestamps) {
            const progress = calculateProgress(timestamps);
            return `
                <div class="spotify-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="spotify-progress-fill" style="width: ${progress.percentage}%"></div>
                    </div>
                    <div class="progress-time">
                        <span id="spotify-current">${progress.current}</span>
                        <span id="spotify-total">${progress.total}</span>
                    </div>
                </div>
            `;
        }

        function calculateProgress(timestamps) {
            const start = timestamps.start;
            const end = timestamps.end;
            const current = Date.now();
            const elapsed = Math.max(0, current - start);
            const total = end - start;
            const percentage = Math.min(100, (elapsed / total) * 100);
            
            const currentTime = formatTime(elapsed);
            const totalTime = formatTime(total);
            
            return { percentage, current: currentTime, total: totalTime };
        }

        function updateSpotifyProgress(timestamps) {
            const progressFill = document.getElementById('spotify-progress-fill');
            const currentTime = document.getElementById('spotify-current');
            
            if (!progressFill || !currentTime) return;
            
            const progress = calculateProgress(timestamps);
            progressFill.style.width = `${progress.percentage}%`;
            currentTime.textContent = progress.current;
        }

        function formatElapsedTime(startTimestamp) {
            const elapsed = Date.now() - startTimestamp;
            const minutes = Math.floor(elapsed / 60000);
            const hours = Math.floor(minutes / 60);
            
            if (hours > 0) {
                return `${hours}h ${minutes % 60}m elapsed`;
            }
            return `${minutes}m elapsed`;
        }

        const mainElement = document.querySelector('main');
        let isHovering = false;
        
        mainElement.addEventListener('mouseenter', () => {
            isHovering = true;
        });
        
        mainElement.addEventListener('mouseleave', () => {
            isHovering = false;
            targetRotateX = 0;
            targetRotateY = 0;
            
            const resetInterval = setInterval(() => {
                currentRotateX += (targetRotateX - currentRotateX) * 0.15;
                currentRotateY += (targetRotateY - currentRotateY) * 0.15;
                
                mainElement.style.transform = `perspective(1200px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
                
                if (Math.abs(currentRotateX) < 0.01 && Math.abs(currentRotateY) < 0.01) {
                    clearInterval(resetInterval);
                    mainElement.style.transform = `perspective(1200px) rotateX(0deg) rotateY(0deg)`;
                }
            }, 16);
        });
        
        mainElement.addEventListener('mousemove', (e) => {
            if (!isHovering) return;
            
            const rect = mainElement.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            targetRotateX = ((y - centerY) / centerY) * -8;
            targetRotateY = ((x - centerX) / centerX) * 8;

            const animate = () => {
                currentRotateX += (targetRotateX - currentRotateX) * 0.1;
                currentRotateY += (targetRotateY - currentRotateY) * 0.1;
                
                mainElement.style.transform = `perspective(1200px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
            };
            animate();
        });

        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            document.documentElement.style.setProperty('--mouse-x', `${x}%`);
            document.documentElement.style.setProperty('--mouse-y', `${y}%`);
            document.body.style.setProperty('--grid-opacity', '1');
        });

        document.addEventListener('mouseleave', () => {
            document.body.style.setProperty('--grid-opacity', '0');
        });

        const style = document.createElement('style');
        style.textContent = `
            body::before {
                opacity: var(--grid-opacity, 0) !important;
            }
        `;
        document.head.appendChild(style);

        async function initializePage() {
            await fetchBadges();
            await fetchDiscordPresence();
            setInterval(fetchDiscordPresence, 1000);
        }

        initializePage();
    </script>
</body>
</html>
