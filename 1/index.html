<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@zero's bio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #fff;
            background: #000;
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.08) 2px, transparent 2px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.08) 2px, transparent 2px);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            -webkit-mask-image: radial-gradient(circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%), black, transparent);
            mask-image: radial-gradient(circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%), black, transparent);
        }

        .container {
            max-width: 100%;
            width: 50%;
            margin: 0;
            padding: 20px;
            position: relative;
            z-index: 1;
            perspective: 1200px;
        }

        main {
            background: rgba(17, 17, 17, 0.7);
            backdrop-filter: blur(10px);
            margin: 0;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
            transform: translateZ(0) rotateX(0deg) rotateY(0deg);
            will-change: transform;
            max-height: 85vh;
            overflow-y: auto;
        }

        main::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.05));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        main:hover::before {
            opacity: 1;
        }

        .discord-presence {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.05));
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .user-info-text {
            flex: 1;
        }

        .user-bio {
            color: #b9bbbe;
            font-size: 0.95rem;
            margin-top: 8px;
            line-height: 1.5;
        }

        .avatar-container {
            position: relative;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #000;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: #333;
        }

        .avatar:hover {
            transform: scale(1.08) rotateZ(5deg);
        }

        .status-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 3px solid rgba(17, 17, 17, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .status-indicator.online { 
            background: #23a559;
            box-shadow: 0 0 10px rgba(35, 165, 89, 0.6);
        }
        
        .status-indicator.idle { 
            background: #f0b232;
            box-shadow: 0 0 10px rgba(240, 178, 50, 0.6);
        }
        
        .status-indicator.dnd { 
            background: #f23f43;
            box-shadow: 0 0 10px rgba(242, 63, 67, 0.6);
        }
        
        .status-indicator.offline { 
            background: #80848e;
        }

        .status-indicator.streaming { 
            background: #593695;
            box-shadow: 0 0 10px rgba(89, 54, 149, 0.6);
        }

        .username {
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .badge {
            width: 24px;
            height: 24px;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            cursor: help;
        }

        .badge:hover {
            transform: scale(1.2);
        }

        .spotify-player {
            margin-top: 15px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(30, 215, 96, 0.15), rgba(30, 215, 96, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(30, 215, 96, 0.3);
            transition: all 0.3s ease;
        }

        .spotify-player:hover {
            border-color: rgba(30, 215, 96, 0.5);
            box-shadow: 0 0 20px rgba(30, 215, 96, 0.1);
        }

        .spotify-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            color: #1ed760;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .spotify-content {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .spotify-album {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            flex-shrink: 0;
            cursor: pointer;
        }

        .spotify-album:hover {
            transform: scale(1.05) rotateZ(-2deg);
        }

        .spotify-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
        }

        .spotify-song {
            font-weight: bold;
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .spotify-artist {
            color: #b3b3b3;
            font-size: 0.9rem;
            margin-bottom: 3px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .spotify-album-name {
            color: #b3b3b3;
            font-size: 0.85rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .spotify-progress {
            margin-top: 12px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background: #1ed760;
            border-radius: 2px;
            transition: width 0.5s linear;
        }

        .progress-time {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #b3b3b3;
        }

        .activity {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            border-left: 3px solid #000;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .activity:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateX(8px);
            border-left-color: #333;
        }

        .activity-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 10px;
        }

        .activity-icon {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            transition: transform 0.3s ease;
            flex-shrink: 0;
            background: #333;
        }

        .activity:hover .activity-icon {
            transform: scale(1.05);
        }

        .activity-name {
            font-weight: bold;
            color: #fff;
            font-size: 1.1rem;
        }

        .activity-details {
            color: #b9bbbe;
            font-size: 0.9rem;
            margin-top: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .activity-type {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
            color: #8e9297;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .activity-timestamps {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .loading, .error {
            text-align: center;
            color: #b9bbbe;
            padding: 20px;
        }

        .error {
            color: #f23f43;
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .social-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
        }

        .social-button:hover {
            transform: scale(1.15) translateY(-5px) rotateZ(5deg);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.5);
        }

        .social-button.discord {
            background: #000000;
            border: 2px solid #000;
        }

        .social-button.discord:hover {
            background: #1a1a1a;
            border-color: #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
        }

        .social-button.tiktok {
            background: #000000;
            border: 2px solid #ffffff;
        }

        .social-button.tiktok:hover {
            background: #ffffff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .social-button.tiktok:hover svg {
            fill: #000000;
        }

        .social-button svg {
            width: 30px;
            height: 30px;
            fill: #ffffff;
            transition: all 0.3s ease;
        }

        main::-webkit-scrollbar {
            width: 8px;
        }

        main::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        main::-webkit-scrollbar-thumb {
            background: rgba(88, 101, 242, 0.5);
            border-radius: 4px;
        }

        main::-webkit-scrollbar-thumb:hover {
            background: rgba(88, 101, 242, 0.7);
        }

        @media (max-width: 768px) {
            .container {
                perspective: none;
            }

            main {
                transform: none !important;
                max-height: 90vh;
            }

            .social-buttons {
                gap: 10px;
            }

            .social-button {
                width: 50px;
                height: 50px;
            }

            .social-button:hover {
                transform: scale(1.1) translateY(-3px);
            }

            .social-button svg {
                width: 24px;
                height: 24px;
            }

            .spotify-content {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <main class="container">
        <div class="discord-presence">
            <div id="presence-container" class="loading">
                Loading Discord presence...
            </div>
        </div>

        <div class="social-buttons">
            <a href="https://discord.com" class="social-button discord" title="Discord" aria-label="Discord">
                <svg viewBox="0 0 24 24">
                    <path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.417.67 2.205H3.71c-1.406 0-2.54-1.137-2.607-2.475V1.028A2.582 2.582 0 0 1 3.71 0h16.512z"/>
                </svg>
            </a>
            <a href="https://tiktok.com" class="social-button tiktok" title="TikTok" aria-label="TikTok">
                <svg viewBox="0 0 24 24">
                    <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.64.4-2.1 1.02v-3.36h-3v10.34a2.26 2.26 0 1 1-2.26-2.26c.13 0 .25 0 .37.02V9.36A5.26 5.26 0 1 0 19.5 18.5z"/>
                </svg>
            </a>
        </div>
    </main>

    <script>
        const DISCORD_ID = '1423011606782021763';
        let presenceUpdateInterval;
        let spotifyUpdateInterval;
        let cachedBadges = [];

        const mainElement = document.querySelector('main');
        const container = document.getElementById('presence-container');

        // ============ 3D Parallax Effect ============
        let isHovering = false;
        let targetRotateX = 0;
        let targetRotateY = 0;
        let currentRotateX = 0;
        let currentRotateY = 0;

        mainElement.addEventListener('mouseenter', () => {
            isHovering = true;
        });

        mainElement.addEventListener('mouseleave', () => {
            isHovering = false;
            targetRotateX = 0;
            targetRotateY = 0;

            const resetInterval = setInterval(() => {
                currentRotateX += (targetRotateX - currentRotateX) * 0.15;
                currentRotateY += (targetRotateY - currentRotateY) * 0.15;

                mainElement.style.transform = `perspective(1200px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;

                if (Math.abs(currentRotateX) < 0.01 && Math.abs(currentRotateY) < 0.01) {
                    clearInterval(resetInterval);
                    mainElement.style.transform = `perspective(1200px) rotateX(0deg) rotateY(0deg)`;
                }
            }, 16);
        });

        mainElement.addEventListener('mousemove', (e) => {
            if (!isHovering) return;

            const rect = mainElement.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            targetRotateX = ((y - centerY) / centerY) * -8;
            targetRotateY = ((x - centerX) / centerX) * 8;

            currentRotateX += (targetRotateX - currentRotateX) * 0.1;
            currentRotateY += (targetRotateY - currentRotateY) * 0.1;

            mainElement.style.transform = `perspective(1200px) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
        });

        // ============ Grid Background Effect ============
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            document.documentElement.style.setProperty('--mouse-x', `${x}%`);
            document.documentElement.style.setProperty('--mouse-y', `${y}%`);
            document.body.style.setProperty('--grid-opacity', '1');
        });

        document.addEventListener('mouseleave', () => {
            document.body.style.setProperty('--grid-opacity', '0');
        });

        const style = document.createElement('style');
        style.textContent = `body::before { opacity: var(--grid-opacity, 0) !important; }`;
        document.head.appendChild(style);

        // ============ Discord Presence ============
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function getBadgeInfo(flag) {
            const badges = {
                1: { name: 'Discord Staff', icon: 'https://cdn.discordapp.com/badge-icons/5e74e9b61934fc1f67c65515d1f7e60d.png' },
                2: { name: 'Partnered Server Owner', icon: 'https://cdn.discordapp.com/badge-icons/3f9748e53446a137a052f3454e2de41e.png' },
                4: { name: 'HypeSquad Events', icon: 'https://cdn.discordapp.com/badge-icons/bf01d1073931f921909045f3a39fd264.png' },
                8: { name: 'Bug Hunter Level 1', icon: 'https://cdn.discordapp.com/badge-icons/2717692c7dca7289b35297368a940dd0.png' },
                64: { name: 'House Bravery', icon: 'https://cdn.discordapp.com/badge-icons/8a88d63823d8a71cd5e390baa45efa02.png' },
                128: { name: 'House Brilliance', icon: 'https://cdn.discordapp.com/badge-icons/011940fd013da3f7fb926e4a1cd2e618.png' },
                256: { name: 'House Balance', icon: 'https://cdn.discordapp.com/badge-icons/3aa41de486fa12454c3761e8e223442e.png' },
                512: { name: 'Early Supporter', icon: 'https://cdn.discordapp.com/badge-icons/7060786766c9c840eb3019e725d2b358.png' },
                16384: { name: 'Bug Hunter Level 2', icon: 'https://cdn.discordapp.com/badge-icons/848f79194d4be5ff5f81505cbd0ce1e6.png' },
                131072: { name: 'Verified Bot Developer', icon: 'https://cdn.discordapp.com/badge-icons/6df5892e0f35b051f8b61eace34f4967.png' },
                262144: { name: 'Early Verified Bot Developer', icon: 'https://cdn.discordapp.com/badge-icons/6df5892e0f35b051f8b61eace34f4967.png' },
                4194304: { name: 'Active Developer', icon: 'https://cdn.discordapp.com/badge-icons/6bdc42827a38498929a4920da12695d9.png' }
            };
            return badges[flag];
        }

        async function fetchBadges() {
            try {
                const response = await fetch(`https://dcdn.dstn.to/profile/${DISCORD_ID}`);
                const data = await response.json();
                return data.badges || [];
            } catch (error) {
                console.error('Error fetching badges:', error);
                return [];
            }
        }

        function renderBadges(publicFlags, userBadges = []) {
            const badgeFlags = [4194304, 262144, 131072, 16384, 512, 256, 128, 64, 8, 4, 2, 1];
            let badgesHTML = '';

            for (const flag of badgeFlags) {
                if (publicFlags & flag) {
                    const badge = getBadgeInfo(flag);
                    if (badge) {
                        badgesHTML += `<img src="${badge.icon}" alt="${badge.name}" class="badge" title="${badge.name}" loading="lazy">`;
                    }
                }
            }

            if (userBadges && userBadges.length > 0) {
                for (const badge of userBadges) {
                    let badgeUrl = badge.icon;
                    
                    if (!badgeUrl) {
                        badgeUrl = 'https://www.regret.bio/media/97279-discordnitro.png';
                    }
                    
                    badgesHTML += `
                        <img src="${badgeUrl}" 
                             alt="${badge.description || 'Badge'}" 
                             class="badge" 
                             title="${badge.description || 'Badge'}" 
                             loading="lazy"
                             onerror="this.src='https://www.regret.bio/media/97279-discordnitro.png'">
                    `;
                }
            }

            return badgesHTML ? `<div class="badges">${badgesHTML}</div>` : '';
        }

        function getActivityIcon(activity) {
            if (activity.name === 'Spotify' && activity.assets?.large_image) {
                return `https://i.scdn.co/image/${activity.assets.large_image.replace('spotify:', '')}`;
            }

            if (activity.assets?.large_image) {
                if (activity.assets.large_image.startsWith('mp:external')) {
                    const externalUrl = activity.assets.large_image.split('mp:external/')[1];
                    return externalUrl ? `https://media.discordapp.net/external/${externalUrl}` : null;
                }
                if (activity.assets.large_image.startsWith('http')) {
                    return activity.assets.large_image;
                }
                if (activity.application_id) {
                    return `https://cdn.discordapp.com/app-assets/${activity.application_id}/${activity.assets.large_image}.png`;
                }
            }

            return null;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function displayPresence(userData) {
            const status = userData.discord_status;
            const user = userData.discord_user;
            const activities = userData.activities;
            const spotify = userData.spotify;

            const isStreaming = activities?.some(a => a.type === 1);
            const displayStatus = isStreaming ? 'streaming' : status;
            const badgesHTML = renderBadges(user.public_flags || 0, cachedBadges);

            let html = `
                <div class="user-info">
                    <div class="avatar-container">
                        <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=128" alt="Avatar" class="avatar" loading="lazy">
                        <div class="status-indicator ${displayStatus}"></div>
                    </div>
                    <div class="user-info-text">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="username">${user.username}</div>
                            ${badgesHTML}
                        </div>
                        ${user.bio ? `<div class="user-bio">${escapeHtml(user.bio)}</div>` : ''}
                    </div>
                </div>
            `;

            if (spotify) {
                const albumArt = spotify.album_art_url;
                const spotifyUrl = spotify.track_id ? `https://open.spotify.com/track/${spotify.track_id}` : '#';
                html += `
                    <div class="spotify-player">
                        <div class="spotify-header">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
                            </svg>
                            Listening to Spotify
                        </div>
                        <div class="spotify-content">
                            ${albumArt ? `<a href="${spotifyUrl}" target="_blank" rel="noopener noreferrer" style="cursor: pointer; text-decoration: none;"><img src="${albumArt}" alt="Album Art" class="spotify-album" loading="lazy"></a>` : ''}
                            <div class="spotify-info">
                                <div class="spotify-song">${escapeHtml(spotify.song)}</div>
                                <div class="spotify-artist">${escapeHtml(spotify.artist)}</div>
                                ${spotify.album ? `<div class="spotify-album-name">${escapeHtml(spotify.album)}</div>` : ''}
                            </div>
                        </div>
                        ${spotify.timestamps ? createSpotifyProgress(spotify.timestamps) : ''}
                    </div>
                `;

                if (spotifyUpdateInterval) clearInterval(spotifyUpdateInterval);
                spotifyUpdateInterval = setInterval(() => {
                    updateSpotifyProgress(spotify.timestamps);
                }, 1000);
            } else {
                if (spotifyUpdateInterval) {
                    clearInterval(spotifyUpdateInterval);
                    spotifyUpdateInterval = null;
                }
            }

            if (activities && activities.length > 0) {
                activities.forEach(activity => {
                    if (activity.type !== 4 && activity.name !== 'Spotify') {
                        const activityIcon = getActivityIcon(activity);

                        html += `
                            <div class="activity">
                                <div class="activity-type">
                                    ${getActivityTypeName(activity.type)}
                                </div>
                                <div class="activity-header">
                                    ${activityIcon ? `<img src="${activityIcon}" alt="${escapeHtml(activity.name)}" class="activity-icon" loading="lazy" onerror="this.style.display='none'">` : ''}
                                    <div>
                                        <div class="activity-name">${escapeHtml(activity.name)}</div>
                                        ${activity.details ? `<div class="activity-details">${escapeHtml(activity.details)}</div>` : ''}
                                        ${activity.state ? `<div class="activity-details">${escapeHtml(activity.state)}</div>` : ''}
                                    </div>
                                </div>
                                ${activity.timestamps?.start ? `
                                    <div class="activity-timestamps">
                                        <div class="activity-details">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-right: 4px; vertical-align: middle;">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                            ${formatElapsedTime(activity.timestamps.start)}
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    }
                });
            }

            container.innerHTML = html;
        }

        function createSpotifyProgress(timestamps) {
            const progress = calculateProgress(timestamps);
            return `
                <div class="spotify-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="spotify-progress-fill" style="width: ${progress.percentage}%"></div>
                    </div>
                    <div class="progress-time">
                        <span id="spotify-current">${progress.current}</span>
                        <span id="spotify-total">${progress.total}</span>
                    </div>
                </div>
            `;
        }

        function calculateProgress(timestamps) {
            const start = timestamps.start;
            const end = timestamps.end;
            const current = Date.now();
            const elapsedMs = Math.max(0, current - start);
            const totalMs = end - start;
            const percentage = Math.min(100, (elapsedMs / totalMs) * 100);

            return {
                percentage,
                current: formatTime(elapsedMs / 1000),
                total: formatTime(totalMs / 1000)
            };
        }

        function updateSpotifyProgress(timestamps) {
            const progressFill = document.getElementById('spotify-progress-fill');
            const currentTime = document.getElementById('spotify-current');

            if (!progressFill || !currentTime) return;

            const progress = calculateProgress(timestamps);
            progressFill.style.width = `${progress.percentage}%`;
            currentTime.textContent = progress.current;
        }

        function formatElapsedTime(startTimestamp) {
            const elapsed = Date.now() - startTimestamp;
            const minutes = Math.floor(elapsed / 60000);
            const hours = Math.floor(minutes / 60);

            if (hours > 0) {
                return `${hours}h ${minutes % 60}m elapsed`;
            }
            return `${minutes}m elapsed`;
        }

        function getActivityTypeName(type) {
            const names = {
                0: 'Playing',
                1: 'Streaming',
                2: 'Listening to',
                3: 'Watching',
                5: 'Competing in'
            };
            return names[type] || 'Activity';
        }

        async function fetchDiscordPresence() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                const data = await response.json();

                if (data.success) {
                    displayPresence(data.data);
                } else {
                    throw new Error('Failed to fetch presence');
                }
            } catch (error) {
                console.error('Error fetching presence:', error);
                container.innerHTML = '<div class="error">Unable to load Discord presence. Please check the Discord ID.</div>';
            }
        }

        async function initializePage() {
            await fetchDiscordPresence();
            
            fetchBadges().then(badges => {
                cachedBadges = badges;
                fetchDiscordPresence();
            }).catch(err => {
                console.error('Failed to fetch badges:', err);
            });
            
            presenceUpdateInterval = setInterval(fetchDiscordPresence, 15000);
        }

        initializePage();
    </script>
</body>
</html>
